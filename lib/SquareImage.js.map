{"version":3,"sources":["../src/SquareImage.jsx"],"names":["SquareImage","backgroundImage","PropTypes","string","isRequired","minWidth","number","maxWidth","parentWidth","func","window","innerWidth","props","state","height","width","backgroundRepeat","backgroundSize","float","display","resize","addEventListener","removeEventListener","newState","setState","Object","assign","cap","min","a","max","Math","floor","modifyState","ref","r","node","Component"],"mappings":";;;;;;;;AAAA;;;;;;;;;;;;IAEqBA,W;;;;;wBACI;AACrB,aAAO;AACLC,yBAAiB,gBAAMC,SAAN,CAAgBC,MAAhB,CAAuBC,UADnC;AAELC,kBAAU,gBAAMH,SAAN,CAAgBI,MAFrB;AAGLC,kBAAU,gBAAML,SAAN,CAAgBI,MAHrB;AAILE,qBAAa,gBAAMN,SAAN,CAAgBO;AAJxB,OAAP;AAMD;;;wBAEyB;AACxB,aAAO;AACLJ,kBAAU,GADL;AAELE,kBAAU,GAFL;AAGLC,qBAAa;AAAA,iBAAME,OAAOC,UAAb;AAAA;AAHR,OAAP;AAKD;;;AAED,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA,0HACXA,KADW;;AAGjB,UAAKC,KAAL,GAAa;AACXC,cAAQ,CADG;AAEXC,aAAO,CAFI;AAGXd,gCAAwBW,MAAMX,eAA9B,MAHW;AAIXe,wBAAkB,WAJP;AAKXC,sBAAgB,OALL;AAMXC,aAAO,MANI;AAOXC,eAAS;AAPE,KAAb;AAHiB;AAYlB;;;;wCAEmB;AAClB,WAAKC,MAAL;AACAV,aAAOW,gBAAP,CAAwB,QAAxB,EAAkC,KAAKD,MAAL,EAAlC;AACD;;;2CAEsB;AACrBV,aAAOY,mBAAP,CAA2B,QAA3B,EAAqC,KAAKF,MAAL,EAArC;AACD;;;gCAEWG,Q,EAAU;AACpB,WAAKC,QAAL,CAAcC,OAAOC,MAAP,CAAc,EAAd,EAAkB,KAAKb,KAAvB,EAA8BU,QAA9B,CAAd;AACD;;;6BAEQ;AAAA;;AACP,UAAMI,MAAM,SAANA,GAAM,CAACC,GAAD,EAAMC,CAAN,EAASC,GAAT;AAAA,eAAiBC,KAAKH,GAAL,CAASG,KAAKD,GAAL,CAASF,GAAT,EAAcC,CAAd,CAAT,EAA2BC,GAA3B,CAAjB;AAAA,OAAZ;AACA,UAAMf,QAAQ,SAARA,KAAQ;AAAA,eACZY,IACE,OAAKf,KAAL,CAAWP,QADb,EAEE,OAAKO,KAAL,CAAWJ,WAAX,KAA2BuB,KAAKC,KAAL,CAAW,OAAKpB,KAAL,CAAWJ,WAAX,KAA2B,OAAKI,KAAL,CAAWP,QAAjD,CAF7B,EAGE,OAAKO,KAAL,CAAWL,QAHb,CADY;AAAA,OAAd;;AAQA,aAAO,YAAM;AACX,eAAK0B,WAAL,CAAiB;AACfnB,kBAAQC,OADO;AAEfA,iBAAOA;AAFQ,SAAjB;AAID,OALD;AAMD;;;6BAEQ;AAAA;;AACP,UAAMmB,MAAM,SAANA,GAAM,CAACC,CAAD,EAAO;AACjB,eAAKC,IAAL,GAAYD,CAAZ;AACD,OAFD;;AAIA,aAAQ;AACJ,aAAKD,GADD;AAEJ,eAAO,KAAKrB;AAFR,QAAR;AAID;;;;EAxEsC,gBAAMwB,S;;kBAA1BrC,W","file":"SquareImage.js","sourcesContent":["import React from 'react'\n\nexport default class SquareImage extends React.Component {\n  static get propTypes() {\n    return {\n      backgroundImage: React.PropTypes.string.isRequired,\n      minWidth: React.PropTypes.number,\n      maxWidth: React.PropTypes.number,\n      parentWidth: React.PropTypes.func,\n    }\n  }\n\n  static get defaultProps() {\n    return {\n      minWidth: 100,\n      maxWidth: 500,\n      parentWidth: () => window.innerWidth,\n    }\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      height: 0,\n      width: 0,\n      backgroundImage: `url(${props.backgroundImage})`,\n      backgroundRepeat: 'no-repeat',\n      backgroundSize: 'cover',\n      float: 'left',\n      display: 'inline-block',\n    }\n  }\n\n  componentDidMount() {\n    this.resize()()\n    window.addEventListener('resize', this.resize())\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.resize())\n  }\n\n  modifyState(newState) {\n    this.setState(Object.assign({}, this.state, newState))\n  }\n\n  resize() {\n    const cap = (min, a, max) => Math.min(Math.max(min, a), max)\n    const width = () => (\n      cap(\n        this.props.minWidth,\n        this.props.parentWidth() / Math.floor(this.props.parentWidth() / this.props.minWidth),\n        this.props.maxWidth\n      )\n    )\n\n    return () => {\n      this.modifyState({\n        height: width(),\n        width: width(),\n      })\n    }\n  }\n\n  render() {\n    const ref = (r) => {\n      this.node = r\n    }\n\n    return (<div\n        ref={ref}\n        style={this.state}\n    />)\n  }\n\n}\n"]}